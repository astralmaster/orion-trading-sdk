{"version":3,"file":"orion-trading-sdk.cjs.development.js","sources":["../node_modules/regenerator-runtime/runtime.js","../src/utils/Tokens.ts","../src/utils/Constants.ts","../src/utils/TxError.ts","../src/utils/Helpers.ts","../src/services/api.ts","../src/services/chain.ts","../src/services/exchange.ts","../src/services/crypto.ts","../src/services/orionAggregator.ts","../src/services/ws.ts","../src/utils/Models.ts"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import {Dictionary} from \"./Models\";\r\n\r\nexport class Tokens {\r\n    readonly nameToAddress: Dictionary<string>;\r\n\r\n    constructor(nameToAddress: Dictionary<string>) {\r\n        this.nameToAddress = {};\r\n        for (const key in nameToAddress) {\r\n            if (nameToAddress[key]) {\r\n                this.nameToAddress[key] = nameToAddress[key].toLowerCase();\r\n            }\r\n        }\r\n    }\r\n\r\n    addressToName(address: string): (string | undefined) {\r\n        for (const name in this.nameToAddress) {\r\n            if (this.nameToAddress[name]) {\r\n                if (this.nameToAddress[name] === address.toLowerCase()) return name;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    addressToNameSafe(address: string): string {\r\n        const name = this.addressToName(address);\r\n        if (name === undefined) throw new Error('no token name for ' + address);\r\n        return name;\r\n    }\r\n\r\n    nameToAddressSafe(name: string): string {\r\n        const address = this.nameToAddress[name];\r\n        if (!address) throw new Error('no address for ' + name);\r\n        return address;\r\n    }\r\n\r\n    addressesToSymbol(baseAsset: string, quoteAsset: string): (string | undefined) {\r\n        const base = this.addressToName(baseAsset);\r\n        if (!base) return undefined;\r\n        const quote = this.addressToName(quoteAsset);\r\n        if (!quote) return undefined;\r\n        return base + '-' + quote;\r\n    }\r\n\r\n    addressesToSymbolSafe(baseAsset: string, quoteAsset: string): string {\r\n        const symbol = this.addressesToSymbol(baseAsset, quoteAsset);\r\n        if (symbol === undefined) throw new Error('no symbol name for ' + baseAsset + ', ' + quoteAsset);\r\n        return symbol;\r\n    }\r\n\r\n    symbolToAddresses(symbol: string): (string[] | undefined) {\r\n        const arr = symbol.split('-');\r\n        if (arr.length !== 2) return undefined;\r\n        const base = this.nameToAddress[arr[0]];\r\n        if (!base) return undefined;\r\n        const quote = this.nameToAddress[arr[1]];\r\n        if (!quote) return undefined;\r\n        return [base, quote];\r\n    }\r\n}\r\n\r\n","import { TxType } from \"./Models\";\r\n\r\nexport const NETWORK = {\r\n    TEST: {\r\n        BSC: {\r\n            RPC: 'https://data-seed-prebsc-1-s1.binance.org:8545',\r\n            ORION: 'https://testing.orionprotocol.io/bsc-testnet',\r\n            CHAIN_ID: 97,\r\n            TX_TIMEOUT_SEC: 60\r\n        },\r\n        ETH: {\r\n            RPC: 'https://testing.orionprotocol.io/eth-ropsten/rpc',\r\n            ORION: 'https://testing.orionprotocol.io/eth-ropsten',\r\n            CHAIN_ID: 3,\r\n            TX_TIMEOUT_SEC: 60\r\n        }\r\n    },\r\n    MAIN: {\r\n        BSC: {\r\n            RPC: 'https://bsc-dataseed.binance.org',\r\n            ORION: 'https://trade-exp.orionprotocol.io',\r\n            CHAIN_ID: 56,\r\n            TX_TIMEOUT_SEC: 120\r\n        },\r\n        ETH: {\r\n            RPC: 'https://trade.orionprotocol.io/rpc',\r\n            ORION: 'https://trade.orionprotocol.io',\r\n            CHAIN_ID: 1,\r\n            TX_TIMEOUT_SEC: 120\r\n        }\r\n    }\r\n}\r\n\r\nexport const ORION_WS = {\r\n    TEST: {\r\n        BSC: 'wss://testing.orionprotocol.io/bsc-testnet',\r\n        ETH: 'wss://testing.orionprotocol.io/eth-ropsten',\r\n    },\r\n    MAIN: {\r\n        BSC: 'wss://trade-exp.orionprotocol.io',\r\n        ETH: 'wss://trade.orionprotocol.io',\r\n    }\r\n}\r\n\r\nexport const DEFAULT_EXPIRATION: number = 29 * 24 * 60 * 60 * 1000; // 29 days\r\n\r\nexport const ORDER_TYPES = {\r\n    Order: [\r\n        {name: \"senderAddress\", type: \"address\"},\r\n        {name: \"matcherAddress\", type: \"address\"},\r\n        {name: \"baseAsset\", type: \"address\"},\r\n        {name: \"quoteAsset\", type: \"address\"},\r\n        {name: \"matcherFeeAsset\", type: \"address\"},\r\n        {name: \"amount\", type: \"uint64\"},\r\n        {name: \"price\", type: \"uint64\"},\r\n        {name: \"matcherFee\", type: \"uint64\"},\r\n        {name: \"nonce\", type: \"uint64\"},\r\n        {name: \"expiration\", type: \"uint64\"},\r\n        {name: \"buySide\", type: \"uint8\"},\r\n    ],\r\n}\r\n\r\nexport const CANCEL_ORDER_TYPES_V2 = {\r\n    DeleteOrder: [\r\n        {name: \"sender\", type: \"address\"},\r\n        {name: \"id\", type: \"string\"},\r\n    ],\r\n};\r\n\r\nexport const CANCEL_ORDER_TYPES = {\r\n    DeleteOrder: [\r\n        {name: \"senderAddress\", type: \"address\"},\r\n        {name: \"id\", type: \"uint64\"},\r\n    ],\r\n};\r\n\r\nexport const DOMAIN_TYPE = [\r\n    {name: \"name\", type: \"string\"},\r\n    {name: \"version\", type: \"string\"},\r\n    {name: \"chainId\", type: \"uint256\"},\r\n    {name: \"salt\", type: \"bytes32\"},\r\n]\r\n\r\nexport const ORDER_STATUSES = [\r\n    \"NEW\",\r\n    \"ACCEPTED\",\r\n    \"DIRECT_SWAP_PENDING\",\r\n    \"ROUTING\",\r\n    \"PARTIALLY_FILLED\",\r\n    \"FILLED\",\r\n    \"TX_PENDING\",\r\n    \"REJECTED\",\r\n    \"SETTLED\",\r\n    \"CANCELED\",\r\n    \"FAILED\"\r\n]\r\n\r\nexport const NETWORK_TOKEN_ADDRESS = '0x0000000000000000000000000000000000000000'\r\n\r\nexport const PRICE_DEVIATIONS = {\r\n    MIN: 0,\r\n    MAX: 50\r\n}\r\n\r\nexport const EXCHANGE_ORDER_PRECISION = 8\r\n\r\nexport const CHAIN_TX_TYPES: Record<string, TxType> = {\r\n    approve: {\r\n        code: 1,\r\n        name: 'APPROVE'\r\n    },\r\n    deposit: {\r\n        code: 2,\r\n        name: 'DEPOSIT'\r\n    },\r\n    withdraw: {\r\n        code: 3,\r\n        name: 'WITHDRAW'\r\n    },\r\n}\r\n\r\nexport const TEST_WALLET = {\r\n    mnemonicPhrase: 'announce room limb pattern dry unit scale effort smooth jazz weasel alcohol'\r\n}\r\n","import { TxType } from './Models'\r\n\r\nexport class TxError extends Error {\r\n    public txHash: string\r\n    public txCode: number\r\n    public txName: string\r\n\r\n    constructor(txHash: string, type: TxType, message: string) {\r\n        super(message)\r\n        this.txHash = txHash\r\n        this.txCode = type.code\r\n        this.txName = type.name\r\n        this.name = 'Transaction error'\r\n    }\r\n}\r\n","import BigNumber from \"bignumber.js\";\r\nimport { ethers } from \"ethers\";\r\nimport { AxiosResponse, AxiosPromise } from \"axios\"\r\nimport { Dictionary, BlockchainInfo, TradeOrderV2, TradeSubOrderV2,\r\n    TradeOrder, TradeSubOrder, OrderbookItem, Pair, GetFeeArgs, MatcherFeeArgs, OrderbookUpdates, TxType } from \"./Models\";\r\nimport { EXCHANGE_ORDER_PRECISION} from '../utils/Constants'\r\nimport { Chain } from '../services/chain'\r\nimport erc20ABI from '../abis/ERC20.json'\r\nimport { TxError } from './TxError'\r\n\r\nexport function getPriceWithDeviation(price: BigNumber, side: string, deviation: BigNumber): BigNumber {\r\n    const d = deviation.dividedBy(100)\r\n    const percent = (side === 'buy' ? d : d.negated()).plus(1);\r\n    return price.multipliedBy(percent);\r\n}\r\n\r\nexport function sumBigNumber(arr: BigNumber[]): BigNumber {\r\n    let result = new BigNumber(0);\r\n    for (const x of arr) {\r\n        result = result.plus(x);\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction toFeePrice(currency: string, nameToPrice: Dictionary<BigNumber>, feeAsset: string): BigNumber {\r\n    const price = nameToPrice[currency].dividedBy(nameToPrice[feeAsset]);\r\n    return price || new BigNumber(0);\r\n}\r\n\r\nfunction calculateMatcherFee({baseAsset, amount, assetsPrices, feePercent, feeAsset}: MatcherFeeArgs): BigNumber {\r\n    const MATCHER_FEE_PERCENT: BigNumber = new BigNumber(feePercent).dividedBy(100);\r\n\r\n    const feeAmount = amount.multipliedBy(MATCHER_FEE_PERCENT);\r\n    const feeToAssetPrice = feeAmount.multipliedBy(toFeePrice(baseAsset, assetsPrices, feeAsset));\r\n\r\n    return feeToAssetPrice;\r\n}\r\n\r\nfunction calculateNetworkFee({\r\n    networkAsset,\r\n    feeAsset,\r\n    gasPriceWei,\r\n    assetsPrices,\r\n    needWithdraw,\r\n    isPool = false,\r\n    limits\r\n}: {\r\n    networkAsset: string,\r\n    feeAsset: string,\r\n    gasPriceWei: string,\r\n    assetsPrices: Dictionary<BigNumber>,\r\n    needWithdraw: boolean,\r\n    isPool: boolean,\r\n    limits: Dictionary<number>\r\n}): { networkFeeEth: BigNumber, networkFee: BigNumber } {\r\n    if (gasPriceWei === 'N/A') return {networkFeeEth: new BigNumber(0), networkFee: new BigNumber(0)};\r\n\r\n    const requiredKeys = ['SWAP_THROUGH_ORION_POOL_GAS_LIMIT', 'FILL_ORDERS_AND_WITHDRAW_GAS_LIMIT', 'FILL_ORDERS_GAS_LIMIT']\r\n    requiredKeys.forEach(key => {\r\n        if (!Object.keys(limits).includes(key)) throw new Error(`${key} in limits is required!`)\r\n    })\r\n\r\n    const { SWAP_THROUGH_ORION_POOL_GAS_LIMIT, FILL_ORDERS_AND_WITHDRAW_GAS_LIMIT, FILL_ORDERS_GAS_LIMIT } = limits\r\n\r\n    const gasPriceEth = new BigNumber(ethers.utils.formatUnits(gasPriceWei, 'ether'));\r\n\r\n    let gasLimit: number;\r\n\r\n    if (isPool) {\r\n        gasLimit = SWAP_THROUGH_ORION_POOL_GAS_LIMIT;\r\n    } else {\r\n        if (needWithdraw) {\r\n            gasLimit = FILL_ORDERS_AND_WITHDRAW_GAS_LIMIT;\r\n        } else {\r\n            gasLimit = FILL_ORDERS_GAS_LIMIT;\r\n        }\r\n    }\r\n    const networkFeeEth = gasPriceEth.multipliedBy(gasLimit);\r\n\r\n    const price = assetsPrices[feeAsset] && assetsPrices[networkAsset]\r\n        ? assetsPrices[networkAsset].dividedBy(assetsPrices[feeAsset])\r\n        : new BigNumber(0);\r\n    const networkFee = networkFeeEth.multipliedBy(price);\r\n\r\n    return {networkFeeEth, networkFee};\r\n}\r\n/*\r\n    getFee return fee value rounded with EXCHANGE_ORDER_PRECISION\r\n*/\r\nexport function getFee ({\r\n    baseAsset,\r\n    amount,\r\n    networkAsset,\r\n    gasPriceWei,\r\n    assetsPrices,\r\n    feePercent,\r\n    feeAsset = 'ORN',\r\n    needWithdraw = false,\r\n    isPool = false,\r\n    limits\r\n}: GetFeeArgs): BigNumber {\r\n    if (!amount || new BigNumber(amount).isNaN() || new BigNumber(amount).lte(0)) throw new Error('amount field is invalid!')\r\n    if (!feePercent || Number.isNaN(Number(feePercent)) || Number(feePercent) <= 0) throw new Error('feePercent field is invalid!')\r\n\r\n    if (!gasPriceWei || new BigNumber(gasPriceWei).isNaN() || new BigNumber(gasPriceWei).lte('0')) {\r\n        throw new Error('gasPriceWei field is invalid!')\r\n    }\r\n\r\n    if (!assetsPrices || !Object.entries(assetsPrices).length) {\r\n        throw new Error('assetsPrices field is invalid!')\r\n    }\r\n    Object.keys(assetsPrices).forEach(key => {\r\n        assetsPrices[key] = new BigNumber(assetsPrices[key])\r\n        if (assetsPrices[key].isNaN() || assetsPrices[key].lte(0)) throw new Error(`assetsPrices.${key} value should be valid BigNumber`)\r\n    })\r\n\r\n    if (!assetsPrices[baseAsset]) throw new Error('baseAsset field is invalid!')\r\n    if (!assetsPrices[feeAsset]) throw new Error('feeAsset field is invalid!')\r\n    if (!assetsPrices[networkAsset]) throw new Error('networkAsset field is invalid!')\r\n\r\n    if (!limits || !Object.keys(limits).length) throw new Error('limits field is required')\r\n    if (!Object.values(limits).every(el => typeof el === 'number' && el > 0)) throw new Error('limits values should be positive numbers')\r\n\r\n    const matcherFee = calculateMatcherFee({ baseAsset, amount, assetsPrices, feePercent, feeAsset })\r\n    const { networkFee } = calculateNetworkFee({ networkAsset, feeAsset, gasPriceWei, assetsPrices, needWithdraw, isPool, limits })\r\n\r\n    if (!matcherFee.gt(0)) throw new Error('matcherFee couldn`t be 0!')\r\n    if (!networkFee.gt(0)) throw new Error('networkFee couldn`t be 0!')\r\n\r\n    const totalFee = matcherFee.plus(networkFee).decimalPlaces(EXCHANGE_ORDER_PRECISION)\r\n\r\n    return totalFee\r\n}\r\n\r\nexport function parseTradeOrder(item: any): TradeOrder {\r\n    const amount = new BigNumber(item.orderQty);\r\n    const price = new BigNumber(item.price);\r\n    const subOrders = item.subOrders ? item.subOrders.map((subOrder: any) => parseTradeSubOrder(subOrder)) : [];\r\n\r\n    const total = amount.multipliedBy(price);\r\n\r\n    return {\r\n        ...{\r\n            date: Number(item.time),\r\n            sender: item.clientId,\r\n            id: Number(item.id),\r\n            type: item.side, // 'buy' / 'sell'\r\n            pair: item.symbol, // 'ETH-BTC'\r\n        },\r\n        blockchainOrder: item?.blockchainOrder,\r\n        status: item.status,\r\n        baseAsset: item.baseAsset,\r\n        quoteAsset: item.quoteAsset,\r\n        feeAsset: item.feeCurrency,\r\n        fee: new BigNumber(item.feeQty),\r\n        side: item.side,\r\n        amount,\r\n        price,\r\n        total,\r\n        subOrders\r\n    };\r\n}\r\n\r\nexport function parseTradeSubOrder(item: any): TradeSubOrder {\r\n    return {\r\n        pair: item.symbol,\r\n        exchange: item.exchange,\r\n        id: Number(item.id),\r\n        amount: new BigNumber(item.subOrdQty),\r\n        price: new BigNumber(item.price),\r\n        status: item.status || 'NEW',\r\n        side: item.side,\r\n        sent: item.sent,\r\n    }\r\n}\r\n\r\nexport function parseTradeOrderV2(item: any): TradeOrderV2 {\r\n    const amount = new BigNumber(item.amount);\r\n    const price = new BigNumber(item.price);\r\n    const [baseAsset, quoteAsset] = item.assetPair.split('-')\r\n    const subOrdersKeys = Object.keys(item.subOrders)\r\n    const subOrders = subOrdersKeys.length ? subOrdersKeys.map((key: any) => parseTradeSubOrderV2(item.subOrders[key])) : [];\r\n\r\n    const total = amount.multipliedBy(price);\r\n\r\n    return {\r\n        ...{\r\n            date: Number(item.creationTime),\r\n            sender: item.sender,\r\n            id: item.id,\r\n            type: item.side, // 'buy' / 'sell'\r\n            pair: item.assetPair, // 'ETH-BTC'\r\n        },\r\n        blockchainOrder: item?.blockchainOrder,\r\n        status: item.status,\r\n        baseAsset,\r\n        quoteAsset,\r\n        feeAsset: item.feeAsset,\r\n        fee: new BigNumber(item.fee),\r\n        amount,\r\n        side: item.side,\r\n        price,\r\n        total,\r\n        subOrders\r\n    };\r\n}\r\n\r\nexport function parseTradeSubOrderV2(item: any): TradeSubOrderV2 {\r\n    return {\r\n        pair: item.assetPair,\r\n        exchange: item.exchange,\r\n        id: Number(item.id),\r\n        amount: new BigNumber(item.amount),\r\n        price: new BigNumber(item.price),\r\n        status: item.status || 'NEW',\r\n        side: item.side,\r\n        tradesInfo: item.tradesInfo\r\n    }\r\n}\r\n\r\nexport function canCancelOrder(order: TradeOrder): boolean {\r\n    return order.status === 'NEW' ||\r\n        order.status === 'ACCEPTED' ||\r\n        order.status === 'ROUTING' ||\r\n        order.status === 'PARTIALLY_FILLED';\r\n}\r\n\r\nexport function isOrderOpen(order: TradeOrder): boolean {\r\n    return order.status === 'NEW' ||\r\n        order.status === 'ACCEPTED' ||\r\n        order.status === 'ROUTING' ||\r\n        order.status === 'PARTIALLY_FILLED' ||\r\n        order.status === 'FILLED' ||\r\n        order.status === 'TX_PENDING' ||\r\n        order.status === 'DIRECT_SWAP_PENDING';\r\n}\r\n\r\nexport function parseOrderbookItem(arr: any): OrderbookItem {\r\n    const price = new BigNumber(arr[0]);\r\n    const size = new BigNumber(arr[1]);\r\n    return {\r\n        price: price,\r\n        size: size,\r\n        total: price.multipliedBy(size),\r\n        cumulativeSize: new BigNumber(0),\r\n        cumulativeTotal: new BigNumber(0),\r\n        avgPrice: new BigNumber(0),\r\n        deltaSize: 0,\r\n        exchanges: (arr[2] as string[])?.map(s => s.toLowerCase())\r\n    }\r\n}\r\n\r\nexport function parseOrderbookItemsV1 (message: {asks: Array<[]>, bids: Array<[]>}): {asks: OrderbookItem[], bids: OrderbookItem[]} {\r\n    const { asks, bids } = message\r\n    return {asks: asks.map(parseOrderbookItem), bids: bids.map(parseOrderbookItem)}\r\n}\r\n\r\nexport function parseOrderbookItemsV2 (message: OrderbookUpdates): {asks: OrderbookItem[], bids: OrderbookItem[]} {\r\n    const { a, b } = message.ob\r\n    return {asks: a.map(parseOrderbookItem), bids: b.map(parseOrderbookItem)}\r\n}\r\n\r\nexport function parsePair(arr: string[]): Pair {\r\n    const name = arr[0]; // \"ETH-BTC\"\r\n    const [fromCurrency, toCurrency] = name.split('-');\r\n    const lastPrice = new BigNumber(arr[1]);\r\n    const openPrice = new BigNumber(arr[2]);\r\n    const change24h = lastPrice.div(openPrice).minus(1).multipliedBy(100);\r\n    const high = new BigNumber(arr[3]);\r\n    const low = new BigNumber(arr[4]);\r\n    const vol24h = new BigNumber(arr[5]);\r\n    return {name, fromCurrency, toCurrency, lastPrice, openPrice, change24h, high, low, vol24h};\r\n}\r\n\r\nexport function parsePairs (data: any[]): Record<string, Pair> {\r\n    const newNameToPair: Record<string, Pair> = {};\r\n\r\n    for (let i = 1; i < data.length; i++) {\r\n        const arr: string[] = data[i];\r\n        const pair = parsePair(arr);\r\n        newNameToPair[pair.name] = pair;\r\n    }\r\n    return newNameToPair\r\n}\r\n\r\nexport function numberToUnit(currency: string, n: BigNumber, blockchainInfo: BlockchainInfo): string {\r\n    if (currency === blockchainInfo.baseCurrencyName) {\r\n        return ethers.utils.parseEther(n.toString()).toString();\r\n    } else {\r\n        const decimals = blockchainInfo.assetToDecimals[currency];\r\n        if (decimals === undefined) throw new Error('no decimals for ' + currency)\r\n        return n.multipliedBy(Math.pow(10, decimals)).toFixed(0, BigNumber.ROUND_DOWN);\r\n    }\r\n}\r\n\r\nexport function  unitToNumber(currency: string, n: BigNumber, blockchainInfo: BlockchainInfo): BigNumber {\r\n    const decimals = currency === blockchainInfo.baseCurrencyName ? 18 : blockchainInfo.assetToDecimals[currency];\r\n    if (decimals === undefined) throw new Error('no decimals for ' + currency)\r\n    return n.dividedBy(Math.pow(10, decimals));\r\n}\r\n\r\nexport function  numberTo8(n: BigNumber.Value): number {\r\n    return Number(new BigNumber(n).multipliedBy(1e8).toFixed(0));\r\n}\r\n\r\nexport async function handleResponse(request: AxiosPromise): Promise<AxiosResponse['data']> {\r\n    try {\r\n        const { data } = await request\r\n        return data\r\n    } catch (error) {\r\n        return Promise.reject(error)\r\n    }\r\n}\r\n\r\nexport async function waitForTx(txResponse: ethers.providers.TransactionResponse, timeoutSec: number, txType: TxType): Promise<string> {\r\n    let txHasResult = false\r\n    const timeoutRunner = setTimeout(() => {\r\n        if (!txHasResult) throw new TxError(txResponse.hash, txType, `Request failed due to exceeding the time limit of ${timeoutSec} seconds!`)\r\n    }, timeoutSec * 1000);\r\n\r\n    const txResult = await txResponse.wait()\r\n    txHasResult = true\r\n    clearTimeout(timeoutRunner)\r\n\r\n    if (txResult.status !== 1) throw new TxError(txResponse.hash, txType, `Request failed with status ${txResult.status}!`)\r\n\r\n    return txResponse.hash\r\n}\r\n\r\nexport function getTokenContracts (chain: Chain): Dictionary<ethers.Contract> {\r\n    const tokensContracts: Dictionary<ethers.Contract> = {};\r\n    const tokens = chain.blockchainInfo.assetToAddress;\r\n    for (const name in tokens) {\r\n        if (name === chain.blockchainInfo.baseCurrencyName) continue;\r\n        const tokenAddress = tokens[name];\r\n        const tokenContract = new ethers.Contract(\r\n            tokenAddress,\r\n            erc20ABI,\r\n            chain.signer\r\n        );\r\n\r\n        tokensContracts[name] = tokenContract;\r\n        tokensContracts[tokenAddress] = tokenContract;\r\n    }\r\n    return tokensContracts\r\n}\r\n","import axios, { AxiosInstance } from \"axios\"\r\nimport { NetworkEntity } from '../utils/Models'\r\n\r\nexport class Api {\r\n    public readonly orionBlockchain!: AxiosInstance\r\n    public readonly orionAggregator!: AxiosInstance\r\n    public readonly binance!: AxiosInstance\r\n\r\n    private static instance: Api;\r\n\r\n    constructor (network: NetworkEntity) {\r\n        if (Api.instance) return Api.instance\r\n\r\n        Api.instance = this\r\n\r\n        this.orionBlockchain = axios.create({\r\n            baseURL: `${network.ORION}/api`,\r\n            timeout: 5000\r\n        })\r\n\r\n        this.orionAggregator = axios.create({\r\n            baseURL: `${network.ORION}/backend/api/v1`,\r\n            timeout: 5000\r\n        })\r\n\r\n        this.binance = axios.create({\r\n            baseURL: network.RPC,\r\n            timeout: 5000\r\n        })\r\n    }\r\n}\r\n","import { ethers } from 'ethers'\r\nimport BigNumber from 'bignumber.js'\r\nimport { BlockchainInfo, NetworkEntity, Dictionary } from '../utils/Models'\r\nimport { Tokens } from '../utils/Tokens'\r\nimport { NETWORK, NETWORK_TOKEN_ADDRESS, CHAIN_TX_TYPES } from '../utils/Constants'\r\nimport { handleResponse, getTokenContracts, waitForTx } from '../utils/Helpers'\r\nimport { Api } from './api'\r\n\r\nexport class Chain {\r\n    public readonly provider: ethers.providers.JsonRpcProvider\r\n    public readonly signer: ethers.Wallet\r\n    public readonly api: Api\r\n    public readonly network: NetworkEntity\r\n\r\n    public tokensContracts!: Dictionary<ethers.Contract>;\r\n    private _blockchainInfo!: BlockchainInfo\r\n    private _tokens!: Tokens\r\n    private _isEthereum!: boolean\r\n    private _tokensFee!: Dictionary<string>\r\n    private _baseLimits!: Dictionary<number>\r\n\r\n    constructor(privateKey: string, network: NetworkEntity = NETWORK.TEST.BSC) {\r\n        this.provider = new ethers.providers.JsonRpcProvider(network.RPC);\r\n        this.api = new Api(network)\r\n        const privateKeyFormatted = privateKey.startsWith('0x') ? privateKey : `0x${privateKey}`\r\n        this.signer = new ethers.Wallet(privateKeyFormatted).connect(this.provider)\r\n        this.network = network\r\n    }\r\n\r\n    public async init(): Promise<void> {\r\n        const info = await this.getBlockchainInfo();\r\n        this._tokensFee = await this.getTokensFee()\r\n        this._baseLimits = await this.getBaseLimits()\r\n        info.baseCurrencyName = this.getNetworkAsset(info)\r\n        this._blockchainInfo = info\r\n        this._tokens = new Tokens(this._blockchainInfo.assetToAddress);\r\n        this._isEthereum = this._blockchainInfo.baseCurrencyName === 'ETH'\r\n        this.tokensContracts = getTokenContracts(this)\r\n    }\r\n\r\n    get blockchainInfo(): BlockchainInfo {\r\n        return this._blockchainInfo;\r\n    }\r\n\r\n    get tokens(): Tokens {\r\n        return this._tokens;\r\n    }\r\n\r\n    get baseLimits(): Dictionary<number> {\r\n        return this._baseLimits;\r\n    }\r\n\r\n    get tokensFee(): Dictionary<string> {\r\n        return this._tokensFee\r\n    }\r\n\r\n    get isEthereum(): boolean {\r\n        return this._isEthereum\r\n    }\r\n\r\n    public getTokenAddress(name: string): string {\r\n        return this.blockchainInfo.assetToAddress[name];\r\n    }\r\n\r\n    public getTokenSymbolsList(): string[] {\r\n        return Object.keys(this.blockchainInfo.assetToAddress)\r\n    }\r\n\r\n    public getTokenAddressesList(): string[] {\r\n        return Object.values(this.blockchainInfo.assetToAddress)\r\n    }\r\n\r\n    public tokenAddressToName(address: string): string {\r\n        for (const name in this.blockchainInfo.assetToAddress) {\r\n            if (Object.prototype.hasOwnProperty.call(this.blockchainInfo.assetToAddress, name)) {\r\n                if (this.blockchainInfo.assetToAddress[name] === address.toLowerCase()) return name;\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n\r\n    public getNetworkAsset (data: BlockchainInfo): string {\r\n        const networkToken = Object.entries(data.assetToAddress).find(el => el[1] === NETWORK_TOKEN_ADDRESS)\r\n        if (!networkToken || !networkToken[0]) throw new Error('Cannot get network token!')\r\n        return networkToken[0]\r\n    }\r\n\r\n    public isNetworkAsset (asset: string): boolean {\r\n        return this.blockchainInfo.baseCurrencyName.toUpperCase() === asset.toUpperCase()\r\n    }\r\n\r\n    public async checkNetworkTokens (): Promise<void> {\r\n        const networkAssetBalance = await this.getNetworkBalance()\r\n        if (!networkAssetBalance.gt(0)) throw new Error('A non-zero balance of network tokens is required!')\r\n    }\r\n\r\n    getBlockchainInfo(): Promise<BlockchainInfo> {\r\n        return handleResponse(this.api.orionBlockchain.get('/info'))\r\n    }\r\n\r\n    getTokensFee(): Promise<Dictionary<string>> {\r\n        return handleResponse(this.api.orionBlockchain.get('/tokensFee'))\r\n    }\r\n\r\n    getBaseLimits(): Promise<Dictionary<number>> {\r\n        return handleResponse(this.api.orionBlockchain.get('/baseLimits'))\r\n    }\r\n\r\n    async getBlockchainPrices(): Promise<Record<string, BigNumber>> {\r\n        try {\r\n            const data = await handleResponse(this.api.orionBlockchain.get('/prices'));\r\n            const result: Record<string, BigNumber> = {};\r\n\r\n            for (const key in data) {\r\n                const assetName = this.tokens.addressToName(key);\r\n                if (assetName) {\r\n                    result[assetName] = new BigNumber(data[key]);\r\n                }\r\n            }\r\n            return result;\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @return gasPrice current gas price in wei\r\n     */\r\n    async getGasPrice(): Promise<string> {\r\n        if (this.isEthereum) {\r\n            return this.getGasPriceOB()\r\n        }\r\n        return this.getGasPriceBinance();\r\n    }\r\n\r\n    private async getGasPriceOB(): Promise<string> {\r\n        return handleResponse(this.api.orionBlockchain.get('/gasPrice'))\r\n    }\r\n\r\n    private async getGasPriceBinance(): Promise<string> {\r\n        try {\r\n            const data: { jsonrpc: string, id: number, result: string} = await handleResponse(this.api.binance.post('', {\r\n                jsonrpc: '2.0',\r\n                id: 1,\r\n                method: 'eth_gasPrice',\r\n                params: []\r\n            }))\r\n\r\n            return new BigNumber(data.result).toString()\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    async getNetworkBalance (): Promise<BigNumber> {\r\n        try {\r\n            const wei: ethers.BigNumber = await this.provider.getBalance(this.signer.address);\r\n            return new BigNumber(ethers.utils.formatEther(wei));\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    async getWalletBalance (ticker?: string): Promise<Dictionary<string>> {\r\n        return new Promise((resolve, reject) => {\r\n            if (ticker === this.blockchainInfo.baseCurrencyName) {\r\n                this.getNetworkBalance()\r\n                    .then((balance) => {\r\n                        resolve({ [this.blockchainInfo.baseCurrencyName]: balance.toString() })\r\n                    })\r\n                    .catch(error => reject(error))\r\n            } else {\r\n                const promises: Array<Promise<string[]>> = []\r\n\r\n                try {\r\n                    let tokens = this.getTokenSymbolsList()\r\n\r\n                    if (ticker) {\r\n                        tokens = tokens.filter(el => el === ticker.toUpperCase())\r\n                    }\r\n\r\n                    tokens.forEach(token => {\r\n                        if (token === this.blockchainInfo.baseCurrencyName) return\r\n                        promises.push(this.getTokenBalance(token))\r\n                    })\r\n\r\n                    Promise.all(promises).then((values) => {\r\n                        const result: Dictionary<string> = {}\r\n\r\n                        values.forEach((el: string[]) => {\r\n                            const name = el[0].toString()\r\n                            const value = el[1].toString()\r\n                            result[name] = value\r\n                        })\r\n                        resolve(result)\r\n                    })\r\n                } catch (error) {\r\n                    reject(error)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    async getTokenBalance (token: string): Promise<string[]> {\r\n        try {\r\n            const balance = await this.tokensContracts[token].balanceOf(this.signer.address)\r\n            return [token, balance.toString()]\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    public async sendTransaction(unsignedTx: ethers.PopulatedTransaction, gasLimit: number, gasPriceWei: BigNumber): Promise<ethers.providers.TransactionResponse> {\r\n        try {\r\n            if(gasLimit > 0) unsignedTx.gasLimit = ethers.BigNumber.from(gasLimit);\r\n            unsignedTx.gasPrice = ethers.BigNumber.from(gasPriceWei.toString());\r\n            const unsignedRequest: ethers.providers.TransactionRequest = await this.signer.populateTransaction(unsignedTx); // NOTE: validate transaction when estimate gas\r\n            return this.signer.sendTransaction(unsignedRequest);\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    async getAllowance( currency: string, toAddress?: string ): Promise<BigNumber> {\r\n        try {\r\n            const decimals = this.blockchainInfo.assetToDecimals[currency]\r\n            const currentTokenContract = this.tokensContracts[currency]\r\n\r\n            if(!decimals || !currentTokenContract) throw new Error('Currency is invaild!')\r\n\r\n            if (!toAddress) {\r\n                toAddress = this.blockchainInfo.exchangeContractAddress;\r\n            }\r\n            const unit: ethers.BigNumber = await currentTokenContract.allowance(this.signer.address, toAddress);\r\n            return new BigNumber(unit.toString()).dividedBy(10 ** decimals);\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    async allowanceHandler (currency: string, amount: string, gasPriceWei: string): Promise<string | void> {\r\n        if (this.isNetworkAsset(currency)) return\r\n\r\n        try {\r\n            const bignumberAmount = new BigNumber(amount)\r\n            const tokenContract = this.tokensContracts[currency]\r\n\r\n            const allowance = await this.getAllowance(currency)\r\n\r\n            if (allowance.lt(bignumberAmount)) {\r\n                const needReset = await this.checkNeedZeroReset(tokenContract)\r\n\r\n                if (needReset) {\r\n                    await this.approve(currency, ethers.constants.Zero.toString(), gasPriceWei)\r\n                    return this.approve(currency, ethers.constants.MaxUint256.toString(), gasPriceWei)\r\n                } else {\r\n                    return this.approve(currency, ethers.constants.MaxUint256.toString(), gasPriceWei)\r\n                }\r\n            }\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    private async checkNeedZeroReset (contract: ethers.Contract): Promise<boolean> {\r\n        const unsignedTx = await contract.populateTransaction.approve(\r\n            this.signer.address,\r\n            ethers.constants.MaxUint256,\r\n        );\r\n        try {\r\n            await this.signer.estimateGas(unsignedTx);\r\n            return false;\r\n        } catch (e) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    async approve(currency: string, amountUnit: string, gasPriceWei?: string): Promise<string> {\r\n        try {\r\n            await this.checkNetworkTokens()\r\n\r\n            const gasPriceWeiLocal = gasPriceWei ? gasPriceWei : await this.getGasPrice()\r\n\r\n            const tokenContract = this.tokensContracts[currency]\r\n\r\n            const toAddress = this.blockchainInfo.exchangeContractAddress;\r\n\r\n            return this.approveERC20({\r\n                amountUnit,\r\n                gasPriceWei: gasPriceWeiLocal,\r\n                toAddress,\r\n                tokenContract,\r\n            });\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    private async approveERC20({amountUnit, gasPriceWei, toAddress, tokenContract}: {\r\n        amountUnit: string,\r\n        gasPriceWei: string,\r\n        toAddress: string,\r\n        tokenContract: ethers.Contract\r\n    }): Promise<string> {\r\n        try {\r\n            const unsignedTx = await tokenContract.populateTransaction.approve(toAddress, amountUnit);\r\n            const txResponse = await this.sendTransaction(\r\n                unsignedTx,\r\n                this.baseLimits.APPROVE_ERC20_GAS_LIMIT,\r\n                new BigNumber(gasPriceWei),\r\n            )\r\n\r\n            return waitForTx(txResponse, this.network.TX_TIMEOUT_SEC, CHAIN_TX_TYPES.approve)\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n}\r\n","import BigNumber from \"bignumber.js\"\r\nimport { ethers } from \"ethers\"\r\nimport { BlockchainOrder, Dictionary, BalanceContract } from '../utils/Models'\r\nimport { CHAIN_TX_TYPES, EXCHANGE_ORDER_PRECISION } from '../utils/Constants'\r\nimport { Chain } from './chain'\r\nimport exchangeABI from '../abis/Exchange.json'\r\nimport { numberToUnit, unitToNumber, handleResponse, waitForTx } from '../utils/Helpers'\r\n\r\nexport class Exchange {\r\n    public readonly chain: Chain;\r\n    public exchangeContract!: ethers.Contract;\r\n\r\n    constructor(chain: Chain) {\r\n        this.chain = chain\r\n\r\n        this.exchangeContract = new ethers.Contract(\r\n            this.chain.blockchainInfo.exchangeContractAddress,\r\n            exchangeABI,\r\n            this.chain.signer\r\n        );\r\n    }\r\n\r\n    async getContractBalance(tokenSymbol?: string): Promise<Dictionary<BalanceContract>> {\r\n        const token = tokenSymbol ? tokenSymbol.toUpperCase() : ''\r\n\r\n        try {\r\n            if (token && !this.chain.getTokenSymbolsList().includes(token)) throw new Error('Invalid token')\r\n\r\n            const result: Dictionary<BalanceContract> = {}\r\n\r\n            const tokenAddresses = token\r\n                ? [this.chain.getTokenAddress(token)]\r\n                : this.chain.getTokenAddressesList()\r\n\r\n            const tokens = token ? [token] : this.chain.getTokenSymbolsList()\r\n\r\n            const total: BigNumber[] = await this.exchangeContract.getBalances(tokenAddresses, this.chain.signer.address)\r\n            const locked = await this.checkReservedBalance(this.chain.signer.address)\r\n\r\n            total.forEach((totalBalance, i) => {\r\n                const lockedValue = locked[tokens[i]] || 0\r\n                result[tokens[i]] = this.parseContractBalance(totalBalance, lockedValue)\r\n            })\r\n\r\n            return result\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    public async checkReservedBalance(walletAddress: string, asset = ''): Promise<Dictionary<string>> {\r\n        const path = `/address/balance/reserved/${asset}?address=${walletAddress}`\r\n\r\n        return handleResponse(this.chain.api.orionAggregator.get(path))\r\n    }\r\n\r\n    private parseContractBalance(total8: BigNumber, locked: string | number): BalanceContract {\r\n        const total = ethers.utils.formatUnits(ethers.BigNumber.from(total8.toString()), EXCHANGE_ORDER_PRECISION)\r\n        const totalBN = new BigNumber(total)\r\n        const lockedBN = new BigNumber(locked)\r\n\r\n        const availableBN = totalBN.minus(lockedBN)\r\n\r\n        const balanceSummary = {\r\n            total: totalBN,\r\n            locked: lockedBN,\r\n            available: availableBN\r\n        }\r\n\r\n        return balanceSummary\r\n    }\r\n\r\n    private async depositETH(amountUnit: string, gasPriceWei: BigNumber): Promise<string> {\r\n        const unsignedTx: ethers.PopulatedTransaction = await this.exchangeContract.populateTransaction.deposit();\r\n        unsignedTx.value = ethers.BigNumber.from(amountUnit);\r\n        const txResponse = await this.chain.sendTransaction(\r\n            unsignedTx,\r\n            this.chain.baseLimits.DEPOSIT_ETH_GAS_LIMIT,\r\n            gasPriceWei\r\n        )\r\n\r\n        return waitForTx(txResponse, this.chain.network.TX_TIMEOUT_SEC, CHAIN_TX_TYPES.deposit)\r\n    }\r\n\r\n    private async depositERC20(currency: string, amountUnit: string, gasPriceWei: BigNumber): Promise<string> {\r\n        const txResponse = await this.chain.sendTransaction(\r\n            await this.exchangeContract.populateTransaction.depositAsset(this.chain.getTokenAddress(currency), amountUnit),\r\n            this.chain.baseLimits.DEPOSIT_ERC20_GAS_LIMIT,\r\n            gasPriceWei\r\n        )\r\n\r\n        return waitForTx(txResponse, this.chain.network.TX_TIMEOUT_SEC, CHAIN_TX_TYPES.deposit)\r\n    }\r\n\r\n    async deposit(currency: string, amount: string, gasPriceWei?: string): Promise<string> {\r\n        try {\r\n            await this.chain.checkNetworkTokens()\r\n\r\n            const bignumberAmount = new BigNumber(amount)\r\n            const amountUnit = numberToUnit(currency, bignumberAmount, this.chain.blockchainInfo);\r\n\r\n            const walletBalanceUint = await this.chain.getWalletBalance(currency)\r\n            const walletBalance = unitToNumber(currency, new BigNumber(walletBalanceUint[currency]), this.chain.blockchainInfo)\r\n\r\n            if (walletBalance.lt(bignumberAmount)) throw new Error(`The wallet balance (${walletBalance}) is lower than the deposit amount (${amount})!`)\r\n\r\n            const gasPriceWeiLocal = gasPriceWei ? gasPriceWei : await this.chain.getGasPrice()\r\n\r\n            if (this.chain.isNetworkAsset(currency)) {\r\n                return this.depositETH(amountUnit, new BigNumber(gasPriceWeiLocal))\r\n            } else {\r\n                await this.chain.allowanceHandler(currency, amount, gasPriceWeiLocal)\r\n                return this.depositERC20(currency, amountUnit, new BigNumber(gasPriceWeiLocal))\r\n            }\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    async withdraw(currency: string, amount: string, gasPriceWei?: string): Promise<string> {\r\n        try {\r\n            await this.chain.checkNetworkTokens()\r\n\r\n            const amountUnit = numberToUnit(currency, new BigNumber(amount), this.chain.blockchainInfo);\r\n            const balance = await this.getContractBalance(currency)\r\n            const gasPriceWeiLocal = gasPriceWei ? gasPriceWei : await this.chain.getGasPrice()\r\n\r\n            if (balance[currency].available.lt(new BigNumber(amount))) throw new Error(`The available contract balance (${balance[currency].available}) is less than the withdrawal amount (${new BigNumber(amount)})! `)\r\n\r\n            const txResponse = await this.chain.sendTransaction(\r\n                await this.exchangeContract.populateTransaction.withdraw(this.chain.getTokenAddress(currency), amountUnit),\r\n                this.chain.baseLimits.WITHDRAW_GAS_LIMIT,\r\n                new BigNumber(gasPriceWeiLocal),\r\n            );\r\n\r\n            return waitForTx(txResponse, this.chain.network.TX_TIMEOUT_SEC, CHAIN_TX_TYPES.withdraw)\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    async validateOrder(order: BlockchainOrder): Promise<boolean> {\r\n        return this.exchangeContract.validateOrder(order);\r\n    }\r\n}\r\n\r\n","import { signTypedMessage } from 'eth-sig-util'\r\nimport {ethers} from \"ethers\"\r\nimport { BlockchainOrder, CancelOrderRequest, CancelOrderRequestV2, DomainData} from \"../utils/Models\"\r\nimport { DOMAIN_TYPE, ORDER_TYPES, CANCEL_ORDER_TYPES_V2 } from '../utils/Constants'\r\n\r\nfunction getDomainData(chainId: number): DomainData {\r\n    return {\r\n        name: \"Orion Exchange\",\r\n        version: \"1\",\r\n        chainId: chainId,\r\n        salt: \"0xf2d857f4a3edcb9b78b4d503bfe733db1e3f6cdc2b7971ee739626c97e86a557\",\r\n    };\r\n}\r\n\r\nexport async function signCancelOrder(cancelOrderRequest: CancelOrderRequest | CancelOrderRequestV2, signer: ethers.Wallet, chainId: number): Promise<string> {\r\n    if (signer.privateKey) {\r\n\r\n        const data = {\r\n            types: {\r\n                EIP712Domain: DOMAIN_TYPE,\r\n                DeleteOrder: CANCEL_ORDER_TYPES_V2.DeleteOrder,\r\n            },\r\n            domain: getDomainData(chainId),\r\n            primaryType: 'DeleteOrder',\r\n            message: cancelOrderRequest,\r\n        };\r\n\r\n        const msgParams = {data};\r\n        const bufferKey = Buffer.from(signer.privateKey.substr(2), 'hex');\r\n        return signTypedMessage(bufferKey, msgParams as any, 'V4');\r\n    } else {\r\n        throw new Error('privateKey is required!')\r\n    }\r\n}\r\n\r\nexport async function signOrder(order: BlockchainOrder, signer: ethers.Wallet, chainId: number): Promise<string> {\r\n\r\n    if (signer.privateKey) {\r\n        const data = {\r\n            types: {\r\n                EIP712Domain: DOMAIN_TYPE,\r\n                Order: ORDER_TYPES.Order,\r\n            },\r\n            domain: getDomainData(chainId),\r\n            primaryType: 'Order',\r\n            message: order,\r\n        };\r\n\r\n        const msgParams = {data};\r\n        const bufferKey = Buffer.from((signer).privateKey.substr(2), 'hex');\r\n        return signTypedMessage(bufferKey, msgParams as any, 'V4');\r\n    } else {\r\n        throw new Error('privateKey is required!')\r\n    }\r\n}\r\n\r\nexport function hashOrder(order: BlockchainOrder): string {\r\n    return ethers.utils.solidityKeccak256(\r\n        [\r\n            'uint8',\r\n            'address',\r\n            'address',\r\n            'address',\r\n            'address',\r\n            'address',\r\n            'uint64',\r\n            'uint64',\r\n            'uint64',\r\n            'uint64',\r\n            'uint64',\r\n            'uint8',\r\n        ],\r\n        [\r\n            \"0x03\",\r\n            order.senderAddress,\r\n            order.matcherAddress,\r\n            order.baseAsset,\r\n            order.quoteAsset,\r\n            order.matcherFeeAsset,\r\n            order.amount,\r\n            order.price,\r\n            order.matcherFee,\r\n            order.nonce,\r\n            order.expiration,\r\n            order.buySide ? '0x01' : '0x00'\r\n        ]\r\n    )\r\n}\r\n","import BigNumber from \"bignumber.js\"\r\nimport { BlockchainOrder, SignOrderModel, SignOrderModelRaw, TradeOrder, PairConfig, TradeOrderV2,\r\n    CancelOrderRequestV2, HistoryParams } from \"../utils/Models\"\r\nimport { getPriceWithDeviation, getFee, numberTo8, handleResponse, parseTradeOrderV2} from '../utils/Helpers'\r\nimport { DEFAULT_EXPIRATION, PRICE_DEVIATIONS } from '../utils/Constants'\r\nimport { hashOrder, signOrder, signCancelOrder } from './crypto'\r\nimport { Chain } from './chain'\r\nimport { Exchange } from './exchange'\r\n\r\nexport class OrionAggregator {\r\n    public readonly chain: Chain;\r\n    public readonly exchange: Exchange;\r\n\r\n    constructor(chain: Chain) {\r\n        this.chain = chain\r\n        this.exchange = new Exchange(chain)\r\n    }\r\n\r\n    public async init(): Promise<boolean> {\r\n        console.warn('OrionAggregator.init() method is currently deprecated and unnecessary')\r\n        return new Promise(resolve => resolve(true))\r\n    }\r\n\r\n    public async getPairsInfo (): Promise<Record<string, PairConfig>> {\r\n        try {\r\n            const data: PairConfig[] = await handleResponse(this.chain.api.orionAggregator.get('/pairs/exchangeInfo'))\r\n            const pairConfigs: Record<string, PairConfig> = {};\r\n            data.forEach((item) => {\r\n                pairConfigs[item.name] = item;\r\n            });\r\n            return pairConfigs\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    private async checkBalanceForOrder (order: SignOrderModel, feeAsset: string, feeAmount: BigNumber): Promise<void> {\r\n        try {\r\n            const asset = order.side === 'buy' ? order.toCurrency.toUpperCase() : order.fromCurrency.toUpperCase()\r\n            const amount = order.side === 'buy' ? order.amount.multipliedBy(order.price) : order.amount\r\n            const balance = await this.exchange.getContractBalance()\r\n\r\n            if (asset === feeAsset) {\r\n                if (balance[asset].available.lt(amount.plus(feeAmount))) {\r\n                    throw new Error(`The available contract balance (${balance[asset].available} ${asset}) is less than the order amount+fee (${amount.plus(feeAmount)} ${asset})!`)\r\n                }\r\n            } else {\r\n                if (balance[asset].available.lt(amount)) {\r\n                    throw new Error(`The available contract balance (${balance[asset].available} ${asset}) is less than the order amount (${amount} ${asset})!`)\r\n                }\r\n\r\n                if (balance[feeAsset].available.lt(feeAmount)) {\r\n                    throw new Error(`The available contract balance (${balance[feeAsset].available} ${feeAsset}) is less than the order fee amount (${feeAmount} ${feeAsset})!`)\r\n                }\r\n            }\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    private async formatRawOrder (order: SignOrderModelRaw): Promise<SignOrderModel> {\r\n        const pair = `${order.fromCurrency.toUpperCase()}-${order.toCurrency.toUpperCase()}`\r\n        const pairs = await this.getPairsInfo()\r\n        const pairConfig = pairs[pair]\r\n        if (!pairConfig) throw new Error(`No such pair ${pair}`)\r\n\r\n        if (order.priceDeviation && (new BigNumber(PRICE_DEVIATIONS.MIN).gt(order.priceDeviation) || new BigNumber(PRICE_DEVIATIONS.MAX).lt(order.priceDeviation) ) )\r\n            throw new Error(`priceDeviation value should between ${PRICE_DEVIATIONS.MIN} and ${PRICE_DEVIATIONS.MAX}`);\r\n\r\n        const formattedOrder: SignOrderModel = Object.assign(order, {\r\n            numberFormat: pairConfig,\r\n            price: new BigNumber(order.price),\r\n            amount: new BigNumber(order.amount),\r\n            priceDeviation: new BigNumber(order.priceDeviation!==undefined ? order.priceDeviation : 0),\r\n            needWithdraw: order.needWithdraw || false // set to false by default, because this feature isn't ready\r\n        })\r\n\r\n        return formattedOrder\r\n    }\r\n\r\n    public async createOrder(orderParams: SignOrderModelRaw): Promise<BlockchainOrder> {\r\n        try {\r\n            const params = await this.formatRawOrder(orderParams)\r\n            const baseAsset: string = this.chain.getTokenAddress(params.fromCurrency);\r\n            const quoteAsset: string = this.chain.getTokenAddress(params.toCurrency);\r\n            const matcherFeeAsset: string = this.chain.getTokenAddress(params.feeCurrency);\r\n            const nonce: number = Date.now();\r\n\r\n            if (!['buy', 'sell'].includes(params.side)) throw new Error('Invalid side, should be buy | sell');\r\n            if (!params.price.gt(0)) throw new Error('Invalid price');\r\n            if (!params.amount.gt(0)) throw new Error('Invalid amount');\r\n            if (!params.priceDeviation.gte(0)) throw new Error('Invalid priceDeviation');\r\n            if (!this.chain.tokensFee[params.feeCurrency]) throw new Error(`Invalid feeCurrency, should be one of ${Object.keys(this.chain.tokensFee)}`);\r\n\r\n            if (params.numberFormat.qtyPrecision === undefined || params.numberFormat.qtyPrecision === null) throw new Error('Invalid qtyPrecision');\r\n            if (params.numberFormat.pricePrecision === undefined || params.numberFormat.pricePrecision === null) throw new Error('Invalid pricePrecision');\r\n\r\n            let gasPriceWei, blockchainPrices\r\n\r\n            if (params.chainPrices) {\r\n                gasPriceWei = params.chainPrices.gasWei\r\n\r\n                blockchainPrices = {\r\n                    [this.chain.blockchainInfo.baseCurrencyName]: new BigNumber(params.chainPrices.networkAsset),\r\n                    [params.fromCurrency]: new BigNumber(params.chainPrices.baseAsset),\r\n                    [params.feeCurrency]: new BigNumber(params.chainPrices.feeAsset),\r\n                }\r\n\r\n                if (!blockchainPrices[this.chain.blockchainInfo.baseCurrencyName].gt(0)) throw new Error('Invalid chainPrices networkAsset')\r\n                if (!blockchainPrices[params.fromCurrency].gt(0)) throw new Error('Invalid chainPrices baseAsset')\r\n                if (!blockchainPrices[params.feeCurrency].gt(0)) throw new Error('Invalid chainPrices feeAsset')\r\n            } else {\r\n                gasPriceWei = await this.chain.getGasPrice();\r\n                blockchainPrices = await this.chain.getBlockchainPrices()\r\n            }\r\n\r\n            const totalFee = getFee({\r\n                baseAsset: params.fromCurrency,\r\n                amount: params.amount,\r\n                feePercent: this.chain.tokensFee[params.feeCurrency],\r\n                assetsPrices: blockchainPrices,\r\n                networkAsset: this.chain.blockchainInfo.baseCurrencyName,\r\n                gasPriceWei,\r\n                needWithdraw: params.needWithdraw,\r\n                isPool: false,\r\n                feeAsset: params.feeCurrency,\r\n                limits: this.chain.baseLimits\r\n            })\r\n\r\n            const priceWithDeviation = params.priceDeviation.isZero() ? params.price : getPriceWithDeviation(params.price, params.side, params.priceDeviation);\r\n\r\n            const amountRounded: BigNumber = params.amount.decimalPlaces(params.numberFormat.qtyPrecision, BigNumber.ROUND_DOWN);\r\n            const priceRounded: BigNumber = priceWithDeviation.decimalPlaces(params.numberFormat.pricePrecision, params.side === 'buy' ? BigNumber.ROUND_UP : BigNumber.ROUND_DOWN);\r\n\r\n            if (totalFee.isZero()) throw new Error('Zero fee');\r\n\r\n            await this.checkBalanceForOrder(params, params.feeCurrency, totalFee)\r\n\r\n            const order: BlockchainOrder = {\r\n                id: '',\r\n                senderAddress: this.chain.signer.address,\r\n                matcherAddress: this.chain.blockchainInfo.matcherAddress,\r\n                baseAsset: baseAsset,\r\n                quoteAsset: quoteAsset,\r\n                matcherFeeAsset: matcherFeeAsset,\r\n                amount: numberTo8(amountRounded),\r\n                price: numberTo8(priceRounded),\r\n                matcherFee: numberTo8(totalFee),\r\n                nonce: nonce,\r\n                expiration: nonce + DEFAULT_EXPIRATION,\r\n                buySide: params.side === 'buy' ? 1 : 0,\r\n                isPersonalSign: false,\r\n                signature: '',\r\n                needWithdraw: params.needWithdraw\r\n            }\r\n\r\n            order.id = hashOrder(order);\r\n            order.signature = await signOrder(order, this.chain.signer, this.chain.network.CHAIN_ID);\r\n            if (!(await this.exchange.validateOrder(order))) {\r\n                throw new Error('Order validation failed');\r\n            }\r\n            return order;\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    public async sendOrder(order: BlockchainOrder, isCreateInternalOrder = false): Promise<{orderId: string | number}> {\r\n        const internalRoute = '/order/internal'\r\n        return handleResponse(this.chain.api.orionAggregator.post(isCreateInternalOrder ? internalRoute : '/order', order))\r\n    }\r\n\r\n    public async cancelOrder(orderId: string | number): Promise<{orderId: string | number}> {\r\n        try {\r\n            const order = await this.getOrderById(orderId)\r\n\r\n            const cancelationSubject = this.getCancelationSubject(order)\r\n\r\n            cancelationSubject.signature = await signCancelOrder(cancelationSubject, this.chain.signer, this.chain.network.CHAIN_ID)\r\n\r\n            return handleResponse(this.chain.api.orionAggregator.delete('/order', {\r\n                data: cancelationSubject\r\n            }))\r\n        } catch (error) {\r\n            return Promise.reject(error)\r\n        }\r\n    }\r\n\r\n    private getCancelationSubject (order: TradeOrderV2 | TradeOrder): CancelOrderRequestV2 {\r\n        const { id, blockchainOrder } = order\r\n        return {\r\n            id,\r\n            sender: blockchainOrder.senderAddress,\r\n            signature: '',\r\n            isPersonalSign: blockchainOrder.isPersonalSign\r\n        }\r\n    }\r\n\r\n    public async getTradeHistory(options?: HistoryParams): Promise<TradeOrderV2[]> {\r\n        const url = '/order/history'\r\n        const params = {\r\n            address: this.chain.signer.address,\r\n            ...options\r\n        }\r\n\r\n        const data = await handleResponse(this.chain.api.orionAggregator.get(url, { params }));\r\n\r\n        return Array.isArray(data) && data.length\r\n            ? data.map(parseTradeOrderV2)\r\n            : []\r\n    }\r\n\r\n\r\n    public async getOrderById (orderId: number | string, owner = this.chain.signer.address): Promise<TradeOrderV2> {\r\n        const path = `/order?orderId=${orderId}&owner=${owner}`\r\n\r\n        const {order} = await handleResponse(this.chain.api.orionAggregator.get(path))\r\n        return parseTradeOrderV2(order)\r\n    }\r\n\r\n    public async getApiVersion (): Promise<number> {\r\n        let version = 1\r\n        try {\r\n            const { apiVersion } = await handleResponse(this.chain.api.orionAggregator.get('/version'))\r\n            version = Number(apiVersion)\r\n        } catch (error) {\r\n            version = 1\r\n        }\r\n        return version\r\n    }\r\n}\r\n","import Websocket from 'ws';\r\nimport ReconnectingWebSocket from 'reconnecting-websocket';\r\nimport { ORION_WS } from '../utils/Constants'\r\nimport EventEmitter from 'events'\r\nimport { parseOrderbookItemsV2, parsePairs } from '../utils/Helpers';\r\n\r\nconst SubscriptionType = {\r\n    ASSET_PAIRS_CONFIG_UPDATES_SUBSCRIBE: 'apcus',\r\n    AGGREGATED_ORDER_BOOK_UPDATES_SUBSCRIBE: 'aobus',\r\n    ADDRESS_UPDATES_SUBSCRIBE: 'aus',\r\n}\r\n\r\nclass WsEmitter extends EventEmitter {\r\n    socket: ReconnectingWebSocket\r\n\r\n    constructor (socket: ReconnectingWebSocket) {\r\n        super()\r\n        this.socket = socket\r\n    }\r\n\r\n    public close () {\r\n        this.socket.close()\r\n    }\r\n}\r\n\r\ninterface MiddlewareFunction {\r\n    (message: any): any;\r\n}\r\n\r\nexport class WS {\r\n    public readonly wsOrionUrl: string\r\n\r\n    constructor(url: string = ORION_WS.MAIN.BSC) {\r\n        this.wsOrionUrl = url\r\n    }\r\n\r\n    public async init(): Promise<boolean> {\r\n        console.warn('WS.init() method is currently deprecated and unnecessary')\r\n        return new Promise(resolve => resolve(true))\r\n    }\r\n\r\n    private connect (url: string, middleware?: MiddlewareFunction, query?: Record<string, unknown>): WsEmitter {\r\n        const socket = new ReconnectingWebSocket(url, [], {\r\n            WebSocket: Websocket\r\n        });\r\n\r\n        const localEmitter = new WsEmitter(socket);\r\n\r\n        socket.onerror = (error) => {\r\n            throw new Error(`WS connection error: ${error.message}!`)\r\n        }\r\n\r\n        socket.onmessage = (message) => {\r\n            if (!message.data) return\r\n            let handledMessage = JSON.parse(message.data)\r\n\r\n            // Ping-pong handling\r\n            if(handledMessage && handledMessage.T === 'pp') {\r\n                socket.send(JSON.stringify(handledMessage))\r\n                return\r\n            }\r\n\r\n            if (query && handledMessage.T && query.T !== `${handledMessage.T}s`) return\r\n\r\n            if (middleware) handledMessage = middleware(handledMessage)\r\n\r\n            localEmitter.emit('message', handledMessage);\r\n        }\r\n\r\n        if (query) socket.send(JSON.stringify(query))\r\n\r\n        return localEmitter\r\n    }\r\n\r\n    public priceFeedAll (): WsEmitter {\r\n        const url = `${this.wsOrionUrl}/ws2/allTickers`\r\n\r\n        return this.connect(url, parsePairs)\r\n    }\r\n\r\n    public priceFeedTicker (symbol: string): WsEmitter {\r\n        const url = `${this.wsOrionUrl}/ws2/ticker/${symbol}`\r\n\r\n        return this.connect(url, parsePairs)\r\n    }\r\n\r\n    public orderBooks (pair: string): WsEmitter {\r\n        return this.orderBooksV2(pair)\r\n    }\r\n\r\n    private orderBooksV2 (pair: string): WsEmitter {\r\n        const url = `${this.wsOrionUrl}/v1`\r\n\r\n        return this.connect(url, parseOrderbookItemsV2, {\r\n            S: pair,\r\n            T: SubscriptionType.AGGREGATED_ORDER_BOOK_UPDATES_SUBSCRIBE\r\n        })\r\n    }\r\n}\r\n","import BigNumber from \"bignumber.js\";\r\n\r\nexport interface Dictionary<T> {\r\n    [key: string]: T;\r\n}\r\n\r\nexport interface BlockchainInfo {\r\n    baseCurrencyName: string;\r\n    chainId: number;\r\n    chainName: string;\r\n    exchangeContractAddress: string;\r\n    matcherAddress: string;\r\n    assetToAddress: Dictionary<string>;\r\n    assetToDecimals: Dictionary<number>;\r\n    assetToIcons: Dictionary<string>;\r\n}\r\nexport interface SignOrderModel {\r\n    fromCurrency: string,\r\n    toCurrency: string,\r\n    feeCurrency: string,\r\n    side: string,\r\n    price: BigNumber,\r\n    amount: BigNumber,\r\n    priceDeviation: BigNumber,\r\n    numberFormat: NumberFormat,\r\n    needWithdraw: boolean,\r\n    chainPrices?: {     // in case if user already knows chain prices\r\n        gasWei: string,\r\n        baseAsset: string | number,\r\n        networkAsset:  string | number,\r\n        feeAsset: string | number\r\n    }\r\n}\r\n\r\nexport interface SignOrderModelRaw {\r\n    fromCurrency: string,\r\n    toCurrency: string,\r\n    feeCurrency: string,\r\n    side: string,\r\n    price: number,\r\n    amount: number,\r\n    priceDeviation?: number,\r\n    needWithdraw?: boolean,\r\n    chainPrices?: {  // in case if user already knows chain prices\r\n        gasWei: string,\r\n        baseAsset: string | number,\r\n        networkAsset: string | number,\r\n        feeAsset: string | number,\r\n    }\r\n}\r\n\r\nexport interface BlockchainOrder {\r\n    id: string; // hash of BlockchainOrder (it's not part of order structure in smart-contract)\r\n\r\n    senderAddress: string; // address\r\n    matcherAddress: string; // address\r\n    baseAsset: string; // address\r\n    quoteAsset: string; // address\r\n    matcherFeeAsset: string; // address\r\n    amount: number; // uint64\r\n    price: number; // uint64\r\n    matcherFee: number; // uint64\r\n    nonce: number; // uint64\r\n    expiration: number; // uint64\r\n    buySide: number; // uint8, 1=buy, 0=sell\r\n    isPersonalSign: boolean; // bool\r\n    signature: string; // bytes\r\n    needWithdraw?: boolean; // bool (not supported yet by smart-contract)\r\n}\r\n\r\nexport interface NumberFormat {\r\n    name: string;\r\n    minQty: number; // validating order amount\r\n    maxQty: number;\r\n    minPrice: number;  // validating order price\r\n    maxPrice: number;\r\n    pricePrecision: number; // formatting price\r\n    qtyPrecision: number; // formatting amount\r\n    baseAssetPrecision: number; // fromCurrency\r\n    quoteAssetPrecision: number; // formatting totals / toCurrency\r\n    limitOrderThreshold?: number;\r\n    executableOnBrokersPriceDeviation?: number;\r\n}\r\n\r\nexport const DEFAULT_NUMBER_FORMAT: NumberFormat = {\r\n    \"name\": \"ETH-BTC\",\r\n    \"minQty\": 0,\r\n    \"maxQty\": Number.MAX_VALUE,\r\n    \"minPrice\": 0,\r\n    \"maxPrice\": Number.MAX_VALUE,\r\n    \"pricePrecision\": 8,\r\n    \"qtyPrecision\": 8,\r\n    \"baseAssetPrecision\": 8,\r\n    \"quoteAssetPrecision\": 8,\r\n    \"limitOrderThreshold\": 0.001,\r\n    \"executableOnBrokersPriceDeviation\": 0.001\r\n}\r\n\r\nexport interface CancelOrderRequestV2 {\r\n    id: number | string;\r\n    sender: string;\r\n    signature: string;\r\n    isPersonalSign: boolean;\r\n}\r\n\r\nexport interface CancelOrderRequest {\r\n    id: number | string;\r\n    senderAddress: string;\r\n    signature: string;\r\n    isPersonalSign: boolean;\r\n}\r\n\r\nexport enum Side {\r\n    BUY = 'buy',\r\n    SELL = 'sell',\r\n}\r\nexport interface OrderData {\r\n    price: BigNumber;\r\n    amount: BigNumber;\r\n    total: BigNumber;\r\n    isAsk: boolean;\r\n}\r\nexport interface Transaction {\r\n    type: 'deposit' | 'withdrawal';\r\n    date: number; // in millis\r\n    token: string;\r\n    amount: BigNumber;\r\n    status: 'Pending' | 'Done' | 'Bridge' | 'Approving' | 'Cancelled';\r\n    transactionHash: string;\r\n    user: string;\r\n    chainId?: number,\r\n    bridgeOrderId?: string;\r\n    bridgeDepositAddress?: string;\r\n    nativeWithdrawAddress?: string;\r\n    bridgeDepositAmount?: BigNumber; // full amount to deposit to bridge\r\n}\r\n\r\nexport type SubOrderStatus =\r\n    'NEW'\r\n    | 'ACCEPTED'\r\n    | 'REJECTED'\r\n    | 'VALIDATION_FAILED'\r\n    | 'FILLED'\r\n    | 'TX_PENDING'\r\n    | 'CANCELED'\r\n    | 'FAILED'\r\n    | 'SETTLED';\r\n\r\n\r\nexport interface TradeSubOrder {\r\n    amount: BigNumber;\r\n    exchange: string;\r\n    id: number;\r\n    price: BigNumber;\r\n    status: SubOrderStatus;\r\n    side: Side;\r\n    sent: boolean;\r\n    pair: string;\r\n}\r\nexport interface TradeSubOrderV2 {\r\n    amount: BigNumber;\r\n    exchange: string;\r\n    id: number;\r\n    price: BigNumber;\r\n    status: SubOrderStatus;\r\n    side: Side;\r\n    tradesInfo: Dictionary<string | number | boolean>;\r\n    pair: string,\r\n}\r\n\r\nexport type OrderStatus =\r\n  | \"NEW\"\r\n  | \"ACCEPTED\"\r\n  | \"DIRECT_SWAP_PENDING\"\r\n  | \"ROUTING\"\r\n  | \"PARTIALLY_FILLED\"\r\n  | \"FILLED\"\r\n  | \"TX_PENDING\"\r\n  | \"REJECTED\"\r\n  | \"SETTLED\"\r\n  | \"CANCELED\"\r\n  | \"FAILED\";\r\n\r\nexport interface TradeOrder {\r\n    blockchainOrder: BlockchainOrder,\r\n    id: number;\r\n    sender: string;\r\n    baseAsset: string;\r\n    quoteAsset: string;\r\n    feeAsset: string;\r\n    fee: BigNumber;\r\n    date: number;\r\n    pair: string;\r\n    amount: BigNumber;\r\n    price: BigNumber;\r\n    side: Side;\r\n    status: OrderStatus;\r\n    subOrders: TradeSubOrder[];\r\n    total: BigNumber;\r\n}\r\n\r\nexport interface TradeOrderV2 {\r\n    pair: string;\r\n    baseAsset: string;\r\n    quoteAsset: string;\r\n    feeAsset: string;\r\n    blockchainOrder: BlockchainOrder,\r\n    status: OrderStatus;\r\n    sender: string;\r\n    date: number;\r\n    id: string;\r\n    side: string;\r\n    amount: BigNumber;\r\n    price: BigNumber;\r\n    fee: BigNumber;\r\n    subOrders: TradeSubOrderV2[];\r\n    total: BigNumber;\r\n}\r\n\r\nexport interface HistoryParams {\r\n    baseAsset?: string;\r\n    quoteAsset?: string;\r\n    startTime?: number;\r\n    endTime?: number;\r\n    limit?: number;\r\n}\r\n\r\nexport interface DomainData {\r\n    name: string;\r\n    version: string;\r\n    chainId: number;\r\n    salt: string;\r\n}\r\n\r\nexport interface OrderbookItem {\r\n    price: BigNumber;\r\n    size: BigNumber;\r\n    total: BigNumber;\r\n    cumulativeSize: BigNumber;\r\n    cumulativeTotal: BigNumber;\r\n    avgPrice: BigNumber;\r\n    deltaSize: number;\r\n    exchanges: string[];\r\n}\r\n\r\nexport interface Pair {\r\n    name: string;\r\n    fromCurrency: string;\r\n    toCurrency: string;\r\n    lastPrice: BigNumber;\r\n    openPrice: BigNumber;\r\n    change24h: BigNumber;\r\n    high: BigNumber;\r\n    low: BigNumber;\r\n    vol24h: BigNumber;\r\n}\r\n\r\nexport interface NetworkEntity {\r\n    RPC: string,\r\n    ORION: string,\r\n    CHAIN_ID: number,\r\n    TX_TIMEOUT_SEC: number\r\n}\r\n\r\nexport interface BalanceContract {\r\n    total: BigNumber,\r\n    locked: BigNumber,\r\n    available: BigNumber\r\n}\r\n\r\nexport interface GetFeeArgs {\r\n    baseAsset: string;\r\n    amount: BigNumber;\r\n    networkAsset: string;\r\n    gasPriceWei: string;\r\n    assetsPrices: Dictionary<BigNumber>;\r\n    needWithdraw: boolean;\r\n    isPool: boolean;\r\n    feePercent: string;\r\n    feeAsset: string;\r\n    limits: Dictionary<number>;\r\n}\r\n\r\nexport interface MatcherFeeArgs {\r\n    baseAsset: string;\r\n    amount: BigNumber;\r\n    assetsPrices: Dictionary<BigNumber>;\r\n    feePercent: string;\r\n    feeAsset: string;\r\n}\r\n\r\nexport interface PairConfig {\r\n    name: string;\r\n    minQty: number; // validating order amount\r\n    maxQty: number;\r\n    minPrice: number; // validating order price\r\n    maxPrice: number;\r\n    pricePrecision: number; // formatting price\r\n    qtyPrecision: number; // formatting amount\r\n    baseAssetPrecision: number; // fromCurrency\r\n    quoteAssetPrecision: number; // formatting totals / toCurrency\r\n    limitOrderThreshold?: number;\r\n    executableOnBrokersPriceDeviation?: number;\r\n}\r\n\r\nexport interface OrderbookUpdates {\r\n    T: string,\r\n    _: number\r\n    S: string,\r\n    ob: {\r\n        a: [][],\r\n        b: [][]\r\n    }\r\n}\r\nexport interface TxType {\r\n    code: number;\r\n    name: string;\r\n}\r\n"],"names":["undefined","Tokens","nameToAddress","key","toLowerCase","addressToName","address","name","addressToNameSafe","Error","nameToAddressSafe","addressesToSymbol","baseAsset","quoteAsset","base","quote","addressesToSymbolSafe","symbol","symbolToAddresses","arr","split","length","NETWORK","TEST","BSC","RPC","ORION","CHAIN_ID","TX_TIMEOUT_SEC","ETH","MAIN","ORION_WS","DEFAULT_EXPIRATION","ORDER_TYPES","Order","type","CANCEL_ORDER_TYPES_V2","DeleteOrder","CANCEL_ORDER_TYPES","DOMAIN_TYPE","ORDER_STATUSES","NETWORK_TOKEN_ADDRESS","PRICE_DEVIATIONS","MIN","MAX","EXCHANGE_ORDER_PRECISION","CHAIN_TX_TYPES","approve","code","deposit","withdraw","TEST_WALLET","mnemonicPhrase","TxError","txHash","message","txCode","txName","getPriceWithDeviation","price","side","deviation","d","dividedBy","percent","negated","plus","multipliedBy","sumBigNumber","result","BigNumber","x","toFeePrice","currency","nameToPrice","feeAsset","calculateMatcherFee","amount","assetsPrices","feePercent","MATCHER_FEE_PERCENT","feeAmount","feeToAssetPrice","calculateNetworkFee","networkAsset","gasPriceWei","needWithdraw","isPool","limits","networkFeeEth","networkFee","requiredKeys","forEach","Object","keys","includes","SWAP_THROUGH_ORION_POOL_GAS_LIMIT","FILL_ORDERS_AND_WITHDRAW_GAS_LIMIT","FILL_ORDERS_GAS_LIMIT","gasPriceEth","ethers","utils","formatUnits","gasLimit","getFee","isNaN","lte","Number","entries","values","every","el","matcherFee","gt","totalFee","decimalPlaces","parseTradeOrder","item","orderQty","subOrders","map","subOrder","parseTradeSubOrder","total","date","time","sender","clientId","id","pair","blockchainOrder","status","feeCurrency","fee","feeQty","exchange","subOrdQty","sent","parseTradeOrderV2","assetPair","subOrdersKeys","parseTradeSubOrderV2","creationTime","tradesInfo","canCancelOrder","order","isOrderOpen","parseOrderbookItem","size","cumulativeSize","cumulativeTotal","avgPrice","deltaSize","exchanges","s","parseOrderbookItemsV1","asks","bids","parseOrderbookItemsV2","ob","a","b","parsePair","fromCurrency","toCurrency","lastPrice","openPrice","change24h","div","minus","high","low","vol24h","parsePairs","data","newNameToPair","i","numberToUnit","n","blockchainInfo","baseCurrencyName","parseEther","toString","decimals","assetToDecimals","Math","pow","toFixed","ROUND_DOWN","unitToNumber","numberTo8","handleResponse","request","Promise","reject","waitForTx","txResponse","timeoutSec","txType","txHasResult","timeoutRunner","setTimeout","hash","wait","txResult","clearTimeout","getTokenContracts","chain","tokensContracts","tokens","assetToAddress","tokenAddress","tokenContract","Contract","erc20ABI","signer","Api","network","instance","orionBlockchain","axios","create","baseURL","timeout","orionAggregator","binance","Chain","privateKey","provider","providers","JsonRpcProvider","api","privateKeyFormatted","startsWith","Wallet","connect","init","getBlockchainInfo","info","getTokensFee","_tokensFee","getBaseLimits","_baseLimits","getNetworkAsset","_blockchainInfo","_tokens","_isEthereum","getTokenAddress","getTokenSymbolsList","getTokenAddressesList","tokenAddressToName","prototype","hasOwnProperty","call","networkToken","find","isNetworkAsset","asset","toUpperCase","checkNetworkTokens","getNetworkBalance","networkAssetBalance","get","getBlockchainPrices","assetName","getGasPrice","isEthereum","getGasPriceOB","getGasPriceBinance","post","jsonrpc","method","params","getBalance","wei","formatEther","getWalletBalance","ticker","resolve","then","balance","error","promises","filter","token","push","getTokenBalance","all","value","balanceOf","sendTransaction","unsignedTx","from","gasPrice","populateTransaction","unsignedRequest","getAllowance","toAddress","currentTokenContract","exchangeContractAddress","allowance","unit","allowanceHandler","bignumberAmount","lt","checkNeedZeroReset","needReset","constants","Zero","MaxUint256","contract","estimateGas","amountUnit","gasPriceWeiLocal","approveERC20","baseLimits","APPROVE_ERC20_GAS_LIMIT","Exchange","exchangeContract","exchangeABI","getContractBalance","tokenSymbol","tokenAddresses","getBalances","checkReservedBalance","locked","totalBalance","lockedValue","parseContractBalance","walletAddress","path","total8","totalBN","lockedBN","availableBN","balanceSummary","available","depositETH","DEPOSIT_ETH_GAS_LIMIT","depositERC20","depositAsset","DEPOSIT_ERC20_GAS_LIMIT","walletBalanceUint","walletBalance","WITHDRAW_GAS_LIMIT","validateOrder","getDomainData","chainId","version","salt","signCancelOrder","cancelOrderRequest","types","EIP712Domain","domain","primaryType","msgParams","bufferKey","Buffer","substr","signTypedMessage","signOrder","hashOrder","solidityKeccak256","senderAddress","matcherAddress","matcherFeeAsset","nonce","expiration","buySide","OrionAggregator","console","warn","getPairsInfo","pairConfigs","checkBalanceForOrder","formatRawOrder","pairs","pairConfig","priceDeviation","formattedOrder","assign","numberFormat","createOrder","orderParams","Date","now","gte","tokensFee","qtyPrecision","pricePrecision","chainPrices","gasWei","blockchainPrices","priceWithDeviation","isZero","amountRounded","priceRounded","ROUND_UP","isPersonalSign","signature","sendOrder","isCreateInternalOrder","internalRoute","cancelOrder","orderId","getOrderById","cancelationSubject","getCancelationSubject","getTradeHistory","options","url","Array","isArray","owner","getApiVersion","apiVersion","SubscriptionType","ASSET_PAIRS_CONFIG_UPDATES_SUBSCRIBE","AGGREGATED_ORDER_BOOK_UPDATES_SUBSCRIBE","ADDRESS_UPDATES_SUBSCRIBE","WsEmitter","socket","close","EventEmitter","WS","wsOrionUrl","middleware","query","ReconnectingWebSocket","WebSocket","Websocket","localEmitter","onerror","onmessage","handledMessage","JSON","parse","T","send","stringify","emit","priceFeedAll","priceFeedTicker","orderBooks","orderBooksV2","S","DEFAULT_NUMBER_FORMAT","MAX_VALUE","Side"],"mappings":"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"}